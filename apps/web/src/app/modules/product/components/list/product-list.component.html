<div class="flex justify-content-between align-items-center">
  <h1>Товары</h1>
  <div>
    <button pButton [label]="'Добавить'"
            class="p-button-success"
            routerLink="/product/add">
    </button>
  </div>
</div>

<crm-table name="products"
           [loading]="loading"
           [values]="products"
           [columns]="itemColumns">
  <ng-template #rowTemplate let-product="item">
    <tr *ngIf="toProduct(product) as product">
      <td>
        <p-image [src]="('file/' + product.image.path) | apiUrl"
                 alt="{{ product.name }}" width="80" [preview]="true">
        </p-image>
      </td>
      <td><a routerLink="/product/card/{{ product._id }}">{{ product.name }}</a></td>
      <td>{{ product.code }}</td>
      <td>{{ product.category?.name }}</td>
      <td>{{ product.price | number }} руб.</td>
      <td>
        <p-tag *ngIf="!product.deleted" styleClass="text-sm" severity="success" value="Активен"></p-tag>
        <p-tag *ngIf="product.deleted" styleClass="text-sm" severity="danger" value="В архиве"></p-tag>
      </td>
    </tr>
  </ng-template>
</crm-table>
